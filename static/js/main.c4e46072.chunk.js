(this["webpackJsonpproducts-inforse"]=this["webpackJsonpproducts-inforse"]||[]).push([[0],{25:function(e,t,n){},26:function(e,t,n){},28:function(e,t,n){},29:function(e,t,n){},30:function(e,t,n){},31:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),s=n(19),a=n.n(s),i=(n(25),n(7)),o=n(9),u=n(2),l=n(17),d=r.a.createContext({allOrderedPizzas:[],setAllOrderedPizzas:function(){}}),j=(n(26),n(0)),p=function(e){var t=e.trigger,n=e.children,c=e.setPopupVisibility;return t&&Object(j.jsx)("div",{className:"popup",children:Object(j.jsxs)("div",{className:"popup__inner",children:[Object(j.jsx)("button",{className:"popup__button",type:"button",onClick:function(){c(!1)},children:"X"}),n]})})},m={cap:{dough:1,tomato_sauce:1,onion:2,sausage:2,mashroom:3,cheese:1},onions:{dough:1,tomato_sauce:1,onion:2,meat:1,cheese:1},king_one:{dough:1,tomato_sauce:1,onion:2,mayo:1,mashroom:3,tomato:2,cheese:3,dill:2,parsley:2},gavay:{dough:1,tomato_sauce:1,onion:2,ananas:1,cheese:2},tonno:{dough:1,tomato_sauce:1,tuna:2,kappers:1,cheese:1},vegeterian:{dough:1,tomato_sauce:1,tomato:2,kappers:1,cucumber:2,onion:2,cheese:1}},b={cap:"https://pizza-leonardo.com.ua/wp-content/uploads/2020/03/%D0%92%D0%95%D0%93%D0%95%D0%A2%D0%90%D0%A0%D0%86%D0%90%D0%9D%D0%A1%D0%AC%D0%9A%D0%90-2-1-675x450.jpg",onions:"https://pizza-leonardo.com.ua/wp-content/uploads/2019/06/%D1%81%D0%B0%D0%B9%D1%82-675x450.jpg",king_one:"https://pizza-leonardo.com.ua/wp-content/uploads/2019/06/%D0%A4%D0%90%D0%92%D0%9E%D0%A0%D0%86%D0%A2%D0%90-675x450.jpg",gavay:"https://pizza-leonardo.com.ua/wp-content/uploads/2019/06/%D0%A4%D0%A0%D0%95%D0%94%D0%9E-675x450.jpg",tonno:"https://pizza-leonardo.com.ua/wp-content/uploads/2019/06/%D0%9C%D0%86%D0%A1%D0%A2%D0%A0%D0%95%D0%A2%D0%90-675x450.jpg",vegeterian:"https://pizza-leonardo.com.ua/wp-content/uploads/2019/06/IMG_2378-675x450.jpg"},h=(n(28),function(e){var t=e.name,n=e.ingredients,c=e.takePizza;return Object(j.jsxs)("div",{className:"product",children:[Object(j.jsx)("img",{className:"product__img",src:b[t],alt:t}),Object(j.jsx)("h3",{className:"product__name",children:t}),Object(j.jsx)("p",{className:"product__ingredients",children:n.join(", ")}),Object(j.jsx)("button",{type:"button",className:"product__button",onClick:function(){return c(t)},children:"Into basket"})]})}),O=(n(29),function(e){var t=e.orderedPizzas;return Object(j.jsxs)("ol",{className:"ordered-pizzas-list",children:[t.map((function(e){return Object(j.jsxs)("li",{className:"ordered-pizzas-list__item",children:[Object(j.jsx)("img",{src:b[e],alt:"img_".concat(e),className:"ordered-pizzas-list__item__img"}),Object(j.jsx)("p",{className:"ordered-pizzas-list__item__name",children:e})]})})),Object(j.jsx)("p",{children:"".concat(t.length," pizzas")})]})}),f=(n(30),function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(!1),a=Object(i.a)(s,2),o=a[0],u=a[1],b=Object(c.useContext)(d),f=b.allOrderedPizzas,_=b.setAllOrderedPizzas,g=Object(c.useCallback)((function(e){r([].concat(Object(l.a)(n),[e]))}));Object(c.useEffect)((function(){n.length>9&&u(!0)}));return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("h1",{className:"title",children:"Pizzas"}),Object(j.jsx)("ul",{className:"product-list",children:Object.entries(m).map((function(e){var t=Object(i.a)(e,2),c=t[0],r=t[1];return Object(j.jsx)("li",{className:"product-list__product",children:Object(j.jsx)(h,{name:c,ingredients:Object.keys(r),takePizza:g,orderedPizzas:n})},c)}))}),n.length>0&&Object(j.jsx)("button",{type:"button",className:"ordered-button",onClick:function(){return u(!0)},children:"buy ".concat(n.length," pizzas")}),Object(j.jsxs)(p,{trigger:o,setPopupVisibility:u,children:[Object(j.jsx)(O,{orderedPizzas:n}),Object(j.jsx)("button",{type:"button",className:"popup-buy__button",onClick:function(){_([].concat(Object(l.a)(f),[n])),r([]),u(!1)},children:"BUY"}),Object(j.jsx)("button",{type:"button",className:"popup-buy__clear",onClick:function(){r([]),u(!1)},children:"clear list"})]})]})});n(31);var _=function(e){var t=e.allOrderedPizzas,n=Object(c.useState)(),r=Object(i.a)(n,2),s=r[0],a=r[1];return Object(c.useEffect)((function(){var e=t.flat(1);a(function(e){if(0!==e.length){var t=[];return e.forEach((function(e){var n=t.find((function(t){return t.name===e}));n?n.number++:t.push({name:e,number:1,ingridients:m[e]})})),[].concat(t).sort((function(e,t){return t.number-e.number})).slice(0,5).map((function(e){return e.name}))}}(e))}),[t]),Object(j.jsx)("header",{className:"header",children:s&&Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(o.b,{to:"/orders",className:"header__link-to-orders",children:"Orders Details"}),Object(j.jsx)("h2",{className:"header__title",children:"Top 5"}),Object(j.jsx)("ul",{className:"header__rating",children:s.map((function(e){return Object(j.jsxs)("li",{className:"header__item",children:[Object(j.jsx)("img",{src:"https://img.freepik.com/free-vector/colorful-round-tasty-pizza_1284-10219.jpg?size=338&ext=jpg",alt:"pizza logo",className:"header__img"}),e]},e)}))})]})})},g=(n(37),function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useContext)(d).allOrderedPizzas,a=s.flat(1);return Object(c.useEffect)((function(){r(function(e){if(0!==e.length){var t=[];e.forEach((function(e){var n=t.find((function(t){return t.name===e}));n?n.number++:t.push({name:e,number:1,ingridients:m[e]})}));var n=[];return t.forEach((function(e){var t=function(t){var c=n.find((function(e){return e.ingredientName===t}));c?c.quantity+=e.ingridients[t]*e.number:n.push({ingredientName:t,quantity:e.ingridients[t]*e.number})};for(var c in e.ingridients)t(c)})),n.sort((function(e,t){return t.quantity-e.quantity})),window.console.log(n.map((function(e){return e.ingredientName}))),n.map((function(e){return e.ingredientName}))}}(a))}),[]),Object(j.jsxs)("div",{className:"orders",children:[Object(j.jsx)(o.b,{to:"/",className:"orders__link-home",children:"Home"}),Object(j.jsx)("h2",{className:"orders__ing-title",children:"Ingridients rating"}),Object(j.jsx)("ul",{className:"orders__ingridients",children:(n||[]).map((function(e){return Object(j.jsx)("li",{className:"orders__ingridients__item",children:e},e)}))}),Object(j.jsx)("h2",{className:"orders__orders-title",children:"Orders Info"}),Object(j.jsx)("ul",{className:"orders__list",children:s.map((function(e){return Object(j.jsx)("li",{className:"orders__list__item",children:e.join(", ")})}))})]})});n(38);function x(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1],s=Object(c.useMemo)((function(){return{allOrderedPizzas:n,setAllOrderedPizzas:r}}),[n]);return Object(j.jsx)("div",{className:"App",children:Object(j.jsx)(d.Provider,{value:s,children:Object(j.jsx)(o.a,{children:Object(j.jsxs)(u.c,{children:[Object(j.jsx)(u.a,{path:"/orders",component:g,exact:!0}),Object(j.jsxs)(u.a,{children:[Object(j.jsx)(_,{allOrderedPizzas:n}),Object(j.jsx)(f,{})]})]})})})})}a.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(x,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.c4e46072.chunk.js.map